# 访问者模式

## 关于知乎对于 visitor 模式使用的解读，一阵见血
Visitor最适于处理树形组织的对象结构，例如语法树、组织架构树等。

这些对象所属的类(class)数量不多，变化频率不大。但对象上的操作(method)却很多，每个应用场景都需要添加一组相关的操作。当你看到这些类随着应用场景的变迁，不断膨胀，**_虚方法越来越多，你就应考虑使用Visitor模式，把这些一组组的虚方法移出去_**。很自然地，每一组相关的操作就对应一个Visitor实例。

这样做的好处很多，最明显的是，前面的类会稳定下来，**不再随着应用的变化而变化**，更贴近本质；还有就是，不同应用场景的代码被解耦了，不再彼此依赖，并且，即使是同一应用场景的代码，替换起来也很方便（考虑同一任务你有两套方案……）。

Visitor是比较酷炫的设计模式，正确地使用会令你代码看起来清爽无比，却又非常强大。

最后补充一点，Visitor实例本身就是轻量对象，是保存应用场景上下文最好的地方，任何复杂的参数传递，放在Visitor实例身上都不是事儿。

链接：https://www.zhihu.com/question/37236639/answer/371647371